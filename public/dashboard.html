<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Dashboard</title>

    <!-- shared styles -->
    <link rel="stylesheet" href="css/main.css" />
    
    <!-- dashboard-specific styles -->
    <link rel="stylesheet" href="css/dashboard.css" />
    
    <!-- stat box styles -->
    <link rel="stylesheet" href="css/stats.css" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <header>
      <button id="btn-loggear" class="log-toggle">+</button>
    </header>

    <section id="log-form-container" class="log-form-container hidden">
      <form id="log-form">
        <h2>Nueva Partida</h2>

        <div style="position: relative; width: 100%">
          <input
            type="text"
            id="game-select"
            class="input-log-box"
            placeholder="Juego"
            autocomplete="off"
          />
          <ul id="game-select-list"></ul>
        </div>

        <!-- Date played input -->
        <input type="date" id="date-played" class="input-log-box" />

        <!-- Duration input -->
        <input type="number" id="duration-input" class="input-log-box" placeholder="Duración"/>

        <!-- Rounds input -->
        <input type="number" id="rounds-input" class="input-log-box" placeholder="Rondas"/>

        <!-- Points Limit -->
        <input type="number" id="pts-limit-input" class="input-log-box" placeholder="Límite de Puntos" value="200"/>

        <!-- No winners checkbox -->
        <div class="no-winner-checkbox">
          <input class="inp-cbx" id="no-winner-cbx" type="checkbox" />
          <label class="cbx" for="no-winner-cbx">
            <span>
              <svg width="12px" height="10px">
                <use xlink:href="#check-4"></use>
              </svg>
            </span>
            <span>Sin ganador</span>
          </label>
          <svg class="inline-svg">
            <symbol id="check-4" viewbox="0 0 12 10">
              <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
            </symbol>
          </svg>
        </div>

        <!-- Players input and list-->
        <input
          type="text"
          id="players-enter"
          class="input-log-box"
          placeholder="Jugadores"
        />
        <div id="players-container"></div>

        <!-- Points table -->
        <div id="scores-container">
          <table id="scores-table" class="score-table">
            <thead>
              <tr id="scores-header"></tr>
            </thead>
            <tbody id="scores-body"></tbody>
          </table>
        </div>

        <!-- F7 Mades container -->
        <div id="f7-mades-container" class="f7-mades-container hidden">
          <label class="f7-mades-label">F7 hechos</label>
          <div class="f7-mades-input-row">
            <input
              type="text"
              id="f7-player-input"
              class="input-log-box"
              placeholder="Jugador"
              autocomplete="off"
            />
            <input
              type="number"
              id="f7-round-input"
              class="input-log-box"
              placeholder="Ronda"
              min="1"
            />
            <button type="button" id="f7-add-btn" class="f7-add-btn">+</button>
          </div>
          <div id="f7-mades-list" class="f7-mades-list"></div>
        </div>

        <!-- Heat extras -->
        <div id="heat-extras" class="hidden">
          <input type="text" id="heat-track-select" class="input-log-box" placeholder="Circuito" autocomplete="off" />
          <ul id="heat-track-list"></ul>

          <div class="heat-mode">
            <label class="radio-option">
              <input type="radio" name="heat-mode" value="Base" checked />
              <span class="radio-custom"></span>
              <span>Base</span>
            </label>
            <label class="radio-option">
              <input type="radio" name="heat-mode" value="Advanzado" />
              <span class="radio-custom"></span>
              <span>Advanzado</span>
            </label>
          </div>
        </div>

        <!-- First-Timers -->
        <div id="first-timers-container" class="hidden">
          <label class="first-timers-label">Jugadores primerizos</label>
          <div id="first-timers-list" class="f7-mades-list"></div>
        </div>

        <button type="submit" id="btn-submit">Enviar</button>
      </form>
    </section>

    <!-- Player filter (new) -->
    <div id="player-filter-wrapper" style="padding-left:32px; margin-top: 18px;">
      <div id="player-filter-container" style="position: relative; max-width: 520px;">
        <input id="player-filter-input" class="input-log-box" placeholder="Filtrar por jugadores" autocomplete="off" />
        <ul id="player-filter-list"></ul>
        <div id="player-filter-selected" style="margin-top:8px;"></div>
      </div>
    </div>

    <!-- Stats hub -->
    <div class="stats-grid" id="stats-grid"></div>

    <!-- Firebase compat SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>

    <!-- Firebase init / auth protection -->
    <script src="js/firebase-config.js"></script>

    <!-- Dashboard logic as module -->
    <script src="js/dashboard.js" type="module"></script>
  </body>
</html>
